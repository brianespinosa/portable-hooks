import Slide from '../components/slide';
import Logo from '../components/logo';
import Drawing from '../components/drawing';
import { setQueryParamIndex, getQueryParamIndex } from '../utils';
import details from '../details.json';

<CH.Slideshow
  preset="https://codesandbox.io/s/portable-hooks-l9xy3z"
  code={{minZoom: 1.75}}
  autoFocus
  start={getQueryParamIndex()}
  onChange={setQueryParamIndex}
>

```jsx src/Tags.js
import React from 'react';

class Tags extends React.Component {
  render() {
    return <h1>Tags</h1>;
  }
}

export default Tags;
```

<Slide hideFooter>

<Logo />

# {details.title}

## {details.author} | {details.authorDepartment}

</Slide>

---

<Slide>

## Hello!

My name is Brian Espinosa and I am the Director of Engineering for Momentive Analysis.

- Joined Momentive March 2022
- Using React since v0.13.0
- Live in Tacoma, WA

</Slide>

---

<Slide>

# Getting Started

## Before we go anywhere... where are we?

</Slide>

Understand the problem space before we jump in.

---

<Slide>

## Do These Challenges Sound Familar?

- Need to access internal component state or methods
- Product implementation details require continually increasing component props and complexity
- Massive unit test suites with difficult logic to isolate prop and state functionality
- Difficulty composing and reusing across different products due to divergent use cases inside components

</Slide>

Open with question of how many people use React on a daily basis. Ask for hands to stay up with all slide questions.

---

<Slide>

## Why Is This a Problem?

Significant impact on productivity, scale, and cost. ðŸ’¸

- Multiple component implementations
- Competing implementation details
- Less stability at scale
- Work is slower in complex components
- This is not fun work! ðŸ˜ž

</Slide>

---

<Slide>

## Let's Fix This!

All of these problems can be significantly reduced or eliminated completely with portable state hooks. ðŸ™Œ

- Patterns for safely sharing component state
- Push implementation details into applications
- Focus on reusability
- Fuctional programming principles

</Slide>

For non-React devs, stick around as everyone will reach a better understanding of some of the problems our front end counterparts are facing.

---

```jsx src/Tags.js
import React from 'react';

class Tags extends React.Component {
  render() {
    return <h1>Tags</h1>;
  }
}

export default Tags;
```

<Slide isSmall>

## Class Components

- State belongs to class
- Unit tests cover all: state, methods, UI

Also we had `this.props` mutability bugs

</Slide>

FIRST CODE SLIDE

---

```jsx src/Tags.js focus=4
import React from 'react';

class Tags extends React.Component {
  state = { tags: ['cat', 'dog', 'bird', 'monkey', 'lion'], newLabel: '' };

  render() {
    return <h1>Tags</h1>;
  }
}

export default Tags;
```

<Slide isSmall>

## Class Components

- State belongs to class
- Unit tests cover all: state, methods, UI

Also we had `this.props` mutability bugs

</Slide>

---

```jsx src/Tags.js focus=7:21
import React from 'react';
import { omitIndexes, move } from 'ramda-adjunct';

class Tags extends React.Component {
  state = { tags: ['cat', 'dog', 'bird', 'monkey', 'lion'], newLabel: '' };

  addTag(name) {
    this.setState({ tags: [...this.state.tags, name], newLabel: '' });
  }

  removeTagAtIndex(index) {
    this.setState({ tags: omitIndexes([index], this.state.tags) });
  }

  moveTagForward(index) {
    this.setState({ tags: move(index, index - 1, this.state.tags) });
  }

  moveTagBackward(index) {
    this.setState({ tags: move(index, index + 1, this.state.tags) });
  }

  render() {
    return <h1>Tags</h1>;
  }
}

export default Tags;
```

<Slide isSmall>

## Class Components

- State belongs to class
- Unit tests cover all: state, methods, UI

Also we had `this.props` mutability bugs

</Slide>

---

```jsx src/Tags.js focus=5:10,14:21
import React from 'react';
import { omitIndexes, move } from 'ramda-adjunct';

class Tags extends React.Component {
  constructor(props) {
    super(props);

    this.handleLabelChange = this.handleLabelChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  state = { tags: ['cat', 'dog', 'bird', 'monkey', 'lion'], newLabel: '' };

  handleLabelChange(event) {
    this.setState({ newLabel: event.target.value });
  }

  handleSubmit(event) {
    this.addTag(this.state.newLabel);
    event.preventDefault();
  }

  addTag(name) {
    this.setState({ tags: [...this.state.tags, name], newLabel: '' });
  }

  removeTagAtIndex(index) {
    this.setState({ tags: omitIndexes([index], this.state.tags) });
  }

  moveTagForward(index) {
    this.setState({ tags: move(index, index - 1, this.state.tags) });
  }

  moveTagBackward(index) {
    this.setState({ tags: move(index, index + 1, this.state.tags) });
  }

  render() {
    return <h1>Tags</h1>;
  }
}

export default Tags;
```

<Slide isSmall>

## Class Components

- State belongs to class
- Unit tests cover all: state, methods, UI

Also we had `this.props` mutability bugs

</Slide>

---

```jsx src/Tags.js focus=39:41
import React from 'react';
import { omitIndexes, move } from 'ramda-adjunct';

class Tags extends React.Component {
  constructor(props) {
    super(props);

    this.handleLabelChange = this.handleLabelChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  state = { tags: ['cat', 'dog', 'bird', 'monkey', 'lion'], newLabel: '' };

  handleLabelChange(event) {
    this.setState({ newLabel: event.target.value });
  }

  handleSubmit(event) {
    this.addTag(this.state.newLabel);
    event.preventDefault();
  }

  addTag(name) {
    this.setState({ tags: [...this.state.tags, name], newLabel: '' });
  }

  removeTagAtIndex(index) {
    this.setState({ tags: omitIndexes([index], this.state.tags) });
  }

  moveTagForward(index) {
    this.setState({ tags: move(index, index - 1, this.state.tags) });
  }

  moveTagBackward(index) {
    this.setState({ tags: move(index, index + 1, this.state.tags) });
  }

  render() {
    return <h1>Tags</h1>;
  }
}

export default Tags;
```

---

```jsx src/Tags.js focus=41:50
import React from 'react';
import { omitIndexes, move } from 'ramda-adjunct';

class Tags extends React.Component {
  constructor(props) {
    super(props);

    this.handleLabelChange = this.handleLabelChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  state = { tags: ['cat', 'dog', 'bird', 'monkey', 'lion'], newLabel: '' };

  handleLabelChange(event) {
    this.setState({ newLabel: event.target.value });
  }

  handleSubmit(event) {
    this.addTag(this.state.newLabel);
    event.preventDefault();
  }

  addTag(name) {
    this.setState({ tags: [...this.state.tags, name], newLabel: '' });
  }

  removeTagAtIndex(index) {
    this.setState({ tags: omitIndexes([index], this.state.tags) });
  }

  moveTagForward(index) {
    this.setState({ tags: move(index, index - 1, this.state.tags) });
  }

  moveTagBackward(index) {
    this.setState({ tags: move(index, index + 1, this.state.tags) });
  }

  render() {
    return (
      <>
        <form onSubmit={this.handleSubmit}>
          <input
            type="text"
            value={this.state.newLabel}
            onChange={this.handleLabelChange}
            placeholder="Add a tag..."
          />
        </form>
      </>
    );
  }
}

export default Tags;
```

---

```jsx src/Tags.js focus=39:67
import React from 'react';
import { omitIndexes, move } from 'ramda-adjunct';

class Tags extends React.Component {
  constructor(props) {
    super(props);

    this.handleLabelChange = this.handleLabelChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  state = { tags: ['cat', 'dog', 'bird', 'monkey', 'lion'], newLabel: '' };

  handleLabelChange(event) {
    this.setState({ newLabel: event.target.value });
  }

  handleSubmit(event) {
    this.addTag(this.state.newLabel);
    event.preventDefault();
  }

  addTag(name) {
    this.setState({ tags: [...this.state.tags, name], newLabel: '' });
  }

  removeTagAtIndex(index) {
    this.setState({ tags: omitIndexes([index], this.state.tags) });
  }

  moveTagForward(index) {
    this.setState({ tags: move(index, index - 1, this.state.tags) });
  }

  moveTagBackward(index) {
    this.setState({ tags: move(index, index + 1, this.state.tags) });
  }

  render() {
    return (
      <>
        <form onSubmit={this.handleSubmit}>
          <input
            type="text"
            value={this.state.newLabel}
            onChange={this.handleLabelChange}
            placeholder="Add a tag..."
          />
        </form>
        {this.state.tags.map((name, i) => (
          <span key={i}>
            {name}
            <button disabled={i === 0} onClick={() => this.moveTagForward(i)}>
              â€¹
            </button>
            <button
              disabled={this.state.tags.length === i + 1}
              onClick={() => this.moveTagBackward(i)}
            >
              â€º
            </button>
            <button onClick={() => this.removeTagAtIndex(i)}>âœ•</button>
          </span>
        ))}
      </>
    );
  }
}

export default Tags;
```

---

```jsx src/Tags.js focus=4:10
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent() {
  return (
    <div>
      <button>Hello</button>
    </div>
  );
}

const app = <h1 style={{ color: 'teal' }}>Hello React</h1>;

ReactDOM.render(app, document.getElementById('root'));
```

To create a component you only need to write a function with a name that starts with a capital letter.

<Slide isSmall>

## Q1

How many of you work with React on a daily basis?

<Drawing />

</Slide>

---

```jsx src/Tags.js focus=4[10:20],12:17
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent() {
  return (
    <div>
      <button>Hello</button>
    </div>
  );
}

const app = (
  <div>
    <MyComponent />
    <MyComponent />
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

Now you can use that function in JSX.

---

```jsx src/Tags.js focus=14[18:29],15[18:31]
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent() {
  return (
    <div>
      <button>Hello</button>
    </div>
  );
}

const app = (
  <div>
    <MyComponent name="Martinelli" />
    <MyComponent name="Saka" />
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

You can assign attributes

```jsx src/Tags.js
import React from 'react';
import { omitIndexes, move } from 'ramda-adjunct';

class Tags extends React.Component {
  constructor(props) {
    super(props);

    this.handleLabelChange = this.handleLabelChange.bind(this);
    this.handleSubmit = this.handleSubmit.bind(this);
  }

  state = { tags: ['cat', 'dog', 'bird', 'monkey', 'lion'], newLabel: '' };

  addTag(name) {
    this.setState({ tags: [...this.state.tags, name], newLabel: '' });
  }

  removeTagAtIndex(index) {
    this.setState({ tags: omitIndexes([index], this.state.tags) });
  }

  moveTagForward(index) {
    this.setState({ tags: move(index, index - 1, this.state.tags) });
  }

  moveTagBackward(index) {
    this.setState({ tags: move(index, index + 1, this.state.tags) });
  }

  handleLabelChange(event) {
    this.setState({ newLabel: event.target.value });
  }

  handleSubmit(event) {
    this.addTag(this.state.newLabel);
    event.preventDefault();
  }

  render() {
    return (
      <>
        <form onSubmit={this.handleSubmit}>
          <input
            type="text"
            value={this.state.newLabel}
            onChange={this.handleLabelChange}
            placeholder="Add a tag..."
          />
        </form>
        {this.state.tags.map((name, i) => (
          <span key={i}>
            {name}
            <button disabled={i === 0} onClick={() => this.moveTagForward(i)}>
              â€¹
            </button>
            <button
              disabled={this.state.tags.length === i + 1}
              onClick={() => this.moveTagBackward(i)}
            >
              â€º
            </button>
            <button onClick={() => this.removeTagAtIndex(i)}>âœ•</button>
          </span>
        ))}
      </>
    );
  }
}

export default Tags;
```

Inside JSX, you use curly braces to wrap dynamic data

---

```jsx src/Tags.js focus=5,9
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const goalCount = 2;
  return (
    <div>
      <button>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const app = (
  <div>
    <MyComponent name="Martinelli" />
    <MyComponent name="Saka" />
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

In fact you can wrap any javascript expression.

---

```jsx src/Tags.js focus=7:9,13[15:35]
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const goalCount = 2;

  const handleClick = (event) => {
    // do something
  };

  return (
    <div>
      <button onClick={handleClick}>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const app = (
  <div>
    <MyComponent name="Martinelli" />
    <MyComponent name="Saka" />
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

To add event listeners you pass a function to the corresponding attribute

---

```jsx src/Tags.js focus=5
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const [goalCount, setCount] = React.useState(2);

  const handleClick = (event) => {
    // do something
  };
  return (
    <div>
      <button onClick={handleClick}>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const app = (
  <div>
    <MyComponent name="Martinelli" />
    <MyComponent name="Saka" />
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

To add state to a component there's the useState function from React.

---

```jsx src/Tags.js focus=5,7:9
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const [goalCount, setCount] = React.useState(2);

  const handleClick = (event) => {
    setCount(goalCount + 1);
  };

  return (
    <div>
      <button onClick={handleClick}>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const app = (
  <div>
    <MyComponent name="Martinelli" />
    <MyComponent name="Saka" />
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

It gives you a function to update the state.

---

```jsx src/Tags.js focus=5,7:9,13,14

```

When you call it, React will know it needs to re-render the component.

---

```jsx src/Tags.js focus=19
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const [goalCount, setCount] = React.useState(2);

  const handleClick = (event) => {
    setCount(goalCount + 1);
  };

  return (
    <div>
      <button onClick={handleClick}>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const players = ['Martinelli', 'Saka', 'G. Jesus'];

const app = (
  <div>
    <MyComponent name="Martinelli" />
    <MyComponent name="Saka" />
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

To render a list

---

```jsx src/Tags.js focus=19,23[6:34],24,25[1:6]
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const [goalCount, setCount] = React.useState(2);

  const handleClick = (event) => {
    setCount(goalCount + 1);
  };

  return (
    <div>
      <button onClick={handleClick}>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const players = ['Martinelli', 'Saka', 'G. Jesus'];

const app = (
  <div>
    {players.map((playerName) => (
      <MyComponent name={playerName} key={playerName} />
    ))}
  </div>
);

ReactDOM.render(app, document.getElementById('root'));
```

you can map each list item to an element using javascript.

---

```jsx src/Tags.js focus=24[38:54]

```

React only needs a unique key for each element, to find out when something changes.

---

```jsx src/Tags.js focus=21:27,30,34
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const [goalCount, setCount] = React.useState(2);

  const handleClick = (event) => {
    setCount(goalCount + 1);
  };

  return (
    <div>
      <button onClick={handleClick}>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const players = ['Martinelli', 'Saka', 'G. Jesus'];

function MyBox() {
  return <div style={{ border: '8px solid deeppink' }}>// TODO something</div>;
}

const app = (
  <MyBox>
    {players.map((playerName) => (
      <MyComponent name={playerName} key={playerName} />
    ))}
  </MyBox>
);

ReactDOM.render(app, document.getElementById('root'));
```

If you want to compose components together

---

```jsx src/Tags.js focus=21[16:27],24,30:34
import React from 'react';
import ReactDOM from 'react-dom';

function MyComponent({ name }) {
  const [goalCount, setCount] = React.useState(2);

  const handleClick = (event) => {
    setCount(goalCount + 1);
  };

  return (
    <div>
      <button onClick={handleClick}>{name}</button>
      {'âš½'.repeat(goalCount)}
    </div>
  );
}

const players = ['Martinelli', 'Saka', 'G. Jesus'];

function MyBox({ children }) {
  return <div style={{ border: '8px solid deeppink' }}>{children}</div>;
}

const app = (
  <MyBox>
    {players.map((playerName) => (
      <MyComponent name={playerName} key={playerName} />
    ))}
  </MyBox>
);

ReactDOM.render(app, document.getElementById('root'));
```

React passes the nested elements inside a special property called children.

</CH.Slideshow>
